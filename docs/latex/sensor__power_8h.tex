\doxysection{app/include/sensor\+\_\+power.h File Reference}
\hypertarget{sensor__power_8h}{}\label{sensor__power_8h}\index{app/include/sensor\_power.h@{app/include/sensor\_power.h}}


This is a library for sensor power configurations and control. This is manages the power configuration, pin configuration, and control of sensor power.  


{\ttfamily \#include "{}sensor\+\_\+id.\+h"{}}\newline
{\ttfamily \#include $<$zephyr/drivers/gpio.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/drivers/adc.\+h$>$}\newline
Include dependency graph for sensor\+\_\+power.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sensor__power_8h__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Sensor power configuration. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{sensor__power_8h_aa66df609f898b8aa1deaeff81498f0cf}\label{sensor__power_8h_aa66df609f898b8aa1deaeff81498f0cf} 
\#define {\bfseries OUTUT\+\_\+\+READ\+\_\+\+DIVIDER\+\_\+\+HIGH}~100
\item 
\Hypertarget{sensor__power_8h_a9ce3d2fecc2e6d0768129e2a0ba6a9f7}\label{sensor__power_8h_a9ce3d2fecc2e6d0768129e2a0ba6a9f7} 
\#define {\bfseries OUTUT\+\_\+\+READ\+\_\+\+DIVIDER\+\_\+\+LOW}~13
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{sensor__power_8h_af0fef1d3475ac0c0f02759e1384fc550}{sensor\+\_\+power\+\_\+init}} (\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config)
\begin{DoxyCompactList}\small\item\em Initialize a sensor\+\_\+power\+\_\+setup. This sets the id of the output, the gpios beings used and the regulator device being used. After configurations are set, the sensors output is set OFF. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}} \mbox{\hyperlink{sensor__power_8h_a43c8fa6a693ff0e093fcbb347d8e8b35}{get\+\_\+sensor\+\_\+output}} (\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config)
\begin{DoxyCompactList}\small\item\em Get the sensor voltage that is set for an output. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__power_8h_a635726c5da52d9e426385e46461510a4}{set\+\_\+sensor\+\_\+output}} (\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config, enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}} voltage)
\begin{DoxyCompactList}\small\item\em Set the sensor voltage for an output, enabling/disabling the correct regulators, and setting the correct gpios. When setting the voltage to OFF the voltage may take 1-\/2 seconds to fully turn off, due to capacitors on the output. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{sensor__power_8h_ab807eed06a3e1579a7fa930c582df33a}{read\+\_\+sensor\+\_\+output}} (\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config)
\begin{DoxyCompactList}\small\item\em Read the voltage output of the selected sensor power configuration. Takes into account resistor divider on output. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__power_8h_a3e23b3ad1ab7f243f5b3041e4974e101}{validate\+\_\+output}} (\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config, enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}} voltage, uint8\+\_\+t accepted\+\_\+error)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is a library for sensor power configurations and control. This is manages the power configuration, pin configuration, and control of sensor power. 

\begin{DoxyAuthor}{Author}
Tyler Garcia 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2025-\/05-\/09
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2025 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\Hypertarget{sensor__power_8h_a43c8fa6a693ff0e093fcbb347d8e8b35}\label{sensor__power_8h_a43c8fa6a693ff0e093fcbb347d8e8b35} 
\index{sensor\_power.h@{sensor\_power.h}!get\_sensor\_output@{get\_sensor\_output}}
\index{get\_sensor\_output@{get\_sensor\_output}!sensor\_power.h@{sensor\_power.h}}
\doxysubsubsection{\texorpdfstring{get\_sensor\_output()}{get\_sensor\_output()}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}} get\+\_\+sensor\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config }\end{DoxyParamCaption})}



Get the sensor voltage that is set for an output. 


\begin{DoxyParams}{Parameters}
{\em config} & \doxylink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t} sensor power configuration for the current sensor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
enum sensor\+\_\+voltage for selected sensor configuration 
\end{DoxyReturn}
\Hypertarget{sensor__power_8h_ab807eed06a3e1579a7fa930c582df33a}\label{sensor__power_8h_ab807eed06a3e1579a7fa930c582df33a} 
\index{sensor\_power.h@{sensor\_power.h}!read\_sensor\_output@{read\_sensor\_output}}
\index{read\_sensor\_output@{read\_sensor\_output}!sensor\_power.h@{sensor\_power.h}}
\doxysubsubsection{\texorpdfstring{read\_sensor\_output()}{read\_sensor\_output()}}
{\footnotesize\ttfamily float read\+\_\+sensor\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config }\end{DoxyParamCaption})}



Read the voltage output of the selected sensor power configuration. Takes into account resistor divider on output. 


\begin{DoxyParams}{Parameters}
{\em config} & \doxylink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t} sensor power configuration for the current sensor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
float output of the sensor power system 
\end{DoxyReturn}
\Hypertarget{sensor__power_8h_af0fef1d3475ac0c0f02759e1384fc550}\label{sensor__power_8h_af0fef1d3475ac0c0f02759e1384fc550} 
\index{sensor\_power.h@{sensor\_power.h}!sensor\_power\_init@{sensor\_power\_init}}
\index{sensor\_power\_init@{sensor\_power\_init}!sensor\_power.h@{sensor\_power.h}}
\doxysubsubsection{\texorpdfstring{sensor\_power\_init()}{sensor\_power\_init()}}
{\footnotesize\ttfamily int sensor\+\_\+power\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config }\end{DoxyParamCaption})}



Initialize a sensor\+\_\+power\+\_\+setup. This sets the id of the output, the gpios beings used and the regulator device being used. After configurations are set, the sensors output is set OFF. 


\begin{DoxyParams}{Parameters}
{\em config} & \doxylink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t} sensor power configuration for the current sensor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int -\/1 if error setting up power system or adc 
\end{DoxyReturn}
\Hypertarget{sensor__power_8h_a635726c5da52d9e426385e46461510a4}\label{sensor__power_8h_a635726c5da52d9e426385e46461510a4} 
\index{sensor\_power.h@{sensor\_power.h}!set\_sensor\_output@{set\_sensor\_output}}
\index{set\_sensor\_output@{set\_sensor\_output}!sensor\_power.h@{sensor\_power.h}}
\doxysubsubsection{\texorpdfstring{set\_sensor\_output()}{set\_sensor\_output()}}
{\footnotesize\ttfamily int set\+\_\+sensor\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config,  }\item[{enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}}}]{voltage }\end{DoxyParamCaption})}



Set the sensor voltage for an output, enabling/disabling the correct regulators, and setting the correct gpios. When setting the voltage to OFF the voltage may take 1-\/2 seconds to fully turn off, due to capacitors on the output. 


\begin{DoxyParams}{Parameters}
{\em config} & \doxylink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t} sensor power configuration for the current sensor \\
\hline
{\em voltage} & enum sensor\+\_\+voltage setting selected \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if successful, sets voltage to OFF if invalid voltage input 
\end{DoxyReturn}
\Hypertarget{sensor__power_8h_a3e23b3ad1ab7f243f5b3041e4974e101}\label{sensor__power_8h_a3e23b3ad1ab7f243f5b3041e4974e101} 
\index{sensor\_power.h@{sensor\_power.h}!validate\_output@{validate\_output}}
\index{validate\_output@{validate\_output}!sensor\_power.h@{sensor\_power.h}}
\doxysubsubsection{\texorpdfstring{validate\_output()}{validate\_output()}}
{\footnotesize\ttfamily int validate\+\_\+output (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config,  }\item[{enum \mbox{\hyperlink{sensor__id_8h_adef9477a37671049d57edb26e6a37746}{sensor\+\_\+voltage}}}]{voltage,  }\item[{uint8\+\_\+t}]{accepted\+\_\+error }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em config} & \doxylink{structsensor__power__config__t}{sensor\+\_\+power\+\_\+config\+\_\+t} sensor power configuration for the current sensor \\
\hline
{\em voltage} & enum sensor\+\_\+voltage setting selected \\
\hline
{\em accepted\+\_\+error} & error in percent that the device is allowed to be off by \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if successful, -\/1 if not 
\end{DoxyReturn}
