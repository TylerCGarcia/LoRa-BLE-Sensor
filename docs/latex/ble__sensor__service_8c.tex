\doxysection{app/src/ble\+\_\+sensor\+\_\+service.c File Reference}
\hypertarget{ble__sensor__service_8c}{}\label{ble__sensor__service_8c}\index{app/src/ble\_sensor\_service.c@{app/src/ble\_sensor\_service.c}}


This is a library to handle the BLE services for the sensor. It allows for configurations of the sensor, including power configuration, sensor configuration, and data frequency. It also allows for the retrieval of the sensor data.  


{\ttfamily \#include "{}ble\+\_\+sensor\+\_\+service.\+h"{}}\newline
{\ttfamily \#include $<$zephyr/bluetooth/bluetooth.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/bluetooth/gatt.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/logging/log.\+h$>$}\newline
{\ttfamily \#include "{}sensor\+\_\+nvs.\+h"{}}\newline
{\ttfamily \#include "{}sensor\+\_\+names.\+h"{}}\newline
Include dependency graph for ble\+\_\+sensor\+\_\+service.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ble__sensor__service_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{ble__sensor__service_8c_a2d285f9a5fb7859723c18937fa6600ca}\label{ble__sensor__service_8c_a2d285f9a5fb7859723c18937fa6600ca} 
{\bfseries LOG\+\_\+\+MODULE\+\_\+\+REGISTER} (BLE\+\_\+\+SENSOR\+\_\+\+SERVICE, LOG\+\_\+\+LEVEL\+\_\+\+DBG)
\item 
\Hypertarget{ble__sensor__service_8c_a0c4c6144894fbd2407f413f1c077737a}\label{ble__sensor__service_8c_a0c4c6144894fbd2407f413f1c077737a} 
{\bfseries BT\+\_\+\+GATT\+\_\+\+SERVICE\+\_\+\+DEFINE} (sensor\+\_\+svc, BT\+\_\+\+GATT\+\_\+\+PRIMARY\+\_\+\+SERVICE(BT\+\_\+\+UUID\+\_\+\+SENSOR), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR\+\_\+\+STATE, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor\+\_\+state, write\+\_\+sensor\+\_\+state, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+ENABLED, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor1\+\_\+enabled, write\+\_\+sensor1\+\_\+enabled, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+CONFIG, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor1\+\_\+config, write\+\_\+sensor1\+\_\+config, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+PWR\+\_\+\+CONFIG, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor1\+\_\+pwr\+\_\+config, write\+\_\+sensor1\+\_\+pwr\+\_\+config, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+DATA\+\_\+\+FREQ, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor1\+\_\+data\+\_\+freq, write\+\_\+sensor1\+\_\+data\+\_\+freq, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+DATA, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ, read\+\_\+sensor1\+\_\+data, NULL, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR1\+\_\+\+DATA\+\_\+\+TIMESTAMP, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ, read\+\_\+sensor1\+\_\+data\+\_\+time, NULL, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+ENABLED, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor2\+\_\+enabled, write\+\_\+sensor2\+\_\+enabled, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+CONFIG, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor2\+\_\+config, write\+\_\+sensor2\+\_\+config, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+PWR\+\_\+\+CONFIG, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor2\+\_\+pwr\+\_\+config, write\+\_\+sensor2\+\_\+pwr\+\_\+config, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+DATA\+\_\+\+FREQ, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+WRITE, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ\texorpdfstring{$\vert$}{|}BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+WRITE, read\+\_\+sensor2\+\_\+data\+\_\+freq, write\+\_\+sensor2\+\_\+data\+\_\+freq, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+DATA, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ, read\+\_\+sensor2\+\_\+data, NULL, NULL), BT\+\_\+\+GATT\+\_\+\+CHARACTERISTIC(BT\+\_\+\+UUID\+\_\+\+SENSOR2\+\_\+\+DATA\+\_\+\+TIMESTAMP, BT\+\_\+\+GATT\+\_\+\+CHRC\+\_\+\+READ, BT\+\_\+\+GATT\+\_\+\+PERM\+\_\+\+READ, read\+\_\+sensor2\+\_\+data\+\_\+time, NULL, NULL),)
\item 
int \mbox{\hyperlink{ble__sensor__service_8c_a1ba80859b2f82bf34b2ea8655204e056}{ble\+\_\+sensor\+\_\+service\+\_\+init}} (\mbox{\hyperlink{structsensor__app__config__t}{sensor\+\_\+app\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}config)
\begin{DoxyCompactList}\small\item\em Initialize the BLE sensor service. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This is a library to handle the BLE services for the sensor. It allows for configurations of the sensor, including power configuration, sensor configuration, and data frequency. It also allows for the retrieval of the sensor data. 

\begin{DoxyAuthor}{Author}
Tyler Garcia 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2025-\/05-\/06
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2025 
\end{DoxyCopyright}


\doxysubsection{Function Documentation}
\Hypertarget{ble__sensor__service_8c_a1ba80859b2f82bf34b2ea8655204e056}\label{ble__sensor__service_8c_a1ba80859b2f82bf34b2ea8655204e056} 
\index{ble\_sensor\_service.c@{ble\_sensor\_service.c}!ble\_sensor\_service\_init@{ble\_sensor\_service\_init}}
\index{ble\_sensor\_service\_init@{ble\_sensor\_service\_init}!ble\_sensor\_service.c@{ble\_sensor\_service.c}}
\doxysubsubsection{\texorpdfstring{ble\_sensor\_service\_init()}{ble\_sensor\_service\_init()}}
{\footnotesize\ttfamily int ble\+\_\+sensor\+\_\+service\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structsensor__app__config__t}{sensor\+\_\+app\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{config }\end{DoxyParamCaption})}



Initialize the BLE sensor service. 


\begin{DoxyParams}{Parameters}
{\em config} & Pointer to the sensor app config \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 if successful, \texorpdfstring{$<$}{<} 0 if unsuccessful 
\end{DoxyReturn}
