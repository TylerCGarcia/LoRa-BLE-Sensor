\doxysection{app/src/sensor\+\_\+nvs.c File Reference}
\hypertarget{sensor__nvs_8c}{}\label{sensor__nvs_8c}\index{app/src/sensor\_nvs.c@{app/src/sensor\_nvs.c}}
{\ttfamily \#include "{}sensor\+\_\+nvs.\+h"{}}\newline
{\ttfamily \#include $<$zephyr/fs/nvs.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/logging/log.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/storage/flash\+\_\+map.\+h$>$}\newline
{\ttfamily \#include $<$zephyr/drivers/flash.\+h$>$}\newline
Include dependency graph for sensor\+\_\+nvs.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{sensor__nvs_8c__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}{NVS\+\_\+\+PARTITION}}~storage\+\_\+partition
\item 
\#define \mbox{\hyperlink{sensor__nvs_8c_ab3dce2e576a700556320e93eb373ed73}{NVS\+\_\+\+PARTITION\+\_\+\+DEVICE}}~FIXED\+\_\+\+PARTITION\+\_\+\+DEVICE(\mbox{\hyperlink{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}{NVS\+\_\+\+PARTITION}})
\item 
\#define \mbox{\hyperlink{sensor__nvs_8c_a9d2e807fcd3e49aaf4c40d17a203dc01}{NVS\+\_\+\+PARTITION\+\_\+\+OFFSET}}~FIXED\+\_\+\+PARTITION\+\_\+\+OFFSET(\mbox{\hyperlink{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}{NVS\+\_\+\+PARTITION}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{sensor__nvs_8c_a8b0c454d609035825f8309a7feb15500}{LOG\+\_\+\+MODULE\+\_\+\+REGISTER}} (SENSOR\+\_\+\+NVS, LOG\+\_\+\+LEVEL\+\_\+\+INF)
\item 
int \mbox{\hyperlink{sensor__nvs_8c_acd3b35314828749fb2850c5b507be010}{sensor\+\_\+nvs\+\_\+setup}} (uint8\+\_\+t nvs\+\_\+address\+\_\+count)
\begin{DoxyCompactList}\small\item\em Setup NVS for use. An enum list of addresses should be defined in application code, with the maximum number of addresses being defined. This must be called before any other NVS functions. This mounts the NVS partition and initializes it. The nvs\+\_\+address\+\_\+count will be used to know when the address is out of bounds. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__nvs_8c_a24adeba9780a84e3adba4e4cc4852a82}{sensor\+\_\+nvs\+\_\+write}} (uint8\+\_\+t address, const void \texorpdfstring{$\ast$}{*}data, size\+\_\+t length)
\begin{DoxyCompactList}\small\item\em Write given data buffer to NVS with given address. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__nvs_8c_ac068b185263f41a08f176a986e2e8ffb}{sensor\+\_\+nvs\+\_\+read}} (uint8\+\_\+t address, void \texorpdfstring{$\ast$}{*}data, size\+\_\+t length)
\begin{DoxyCompactList}\small\item\em Read data from NVS with given address, data is written to the provided buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__nvs_8c_af615860b9748846209f289beb45ce676}{sensor\+\_\+nvs\+\_\+delete}} (uint8\+\_\+t address)
\begin{DoxyCompactList}\small\item\em Delete data from NVS with given address. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{sensor__nvs_8c_a82eb1f53f08c01bc99029213a6203dc3}{sensor\+\_\+nvs\+\_\+clear}} (void)
\begin{DoxyCompactList}\small\item\em Clear all data from NVS. NVS must be setup again after clearing. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}\label{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!NVS\_PARTITION@{NVS\_PARTITION}}
\index{NVS\_PARTITION@{NVS\_PARTITION}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{NVS\_PARTITION}{NVS\_PARTITION}}
{\footnotesize\ttfamily \#define NVS\+\_\+\+PARTITION~storage\+\_\+partition}

\Hypertarget{sensor__nvs_8c_ab3dce2e576a700556320e93eb373ed73}\label{sensor__nvs_8c_ab3dce2e576a700556320e93eb373ed73} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!NVS\_PARTITION\_DEVICE@{NVS\_PARTITION\_DEVICE}}
\index{NVS\_PARTITION\_DEVICE@{NVS\_PARTITION\_DEVICE}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{NVS\_PARTITION\_DEVICE}{NVS\_PARTITION\_DEVICE}}
{\footnotesize\ttfamily \#define NVS\+\_\+\+PARTITION\+\_\+\+DEVICE~FIXED\+\_\+\+PARTITION\+\_\+\+DEVICE(\mbox{\hyperlink{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}{NVS\+\_\+\+PARTITION}})}

\Hypertarget{sensor__nvs_8c_a9d2e807fcd3e49aaf4c40d17a203dc01}\label{sensor__nvs_8c_a9d2e807fcd3e49aaf4c40d17a203dc01} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!NVS\_PARTITION\_OFFSET@{NVS\_PARTITION\_OFFSET}}
\index{NVS\_PARTITION\_OFFSET@{NVS\_PARTITION\_OFFSET}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{NVS\_PARTITION\_OFFSET}{NVS\_PARTITION\_OFFSET}}
{\footnotesize\ttfamily \#define NVS\+\_\+\+PARTITION\+\_\+\+OFFSET~FIXED\+\_\+\+PARTITION\+\_\+\+OFFSET(\mbox{\hyperlink{sensor__nvs_8c_af729ab27c6be48ab7a2fa0d9779ed594}{NVS\+\_\+\+PARTITION}})}



\doxysubsection{Function Documentation}
\Hypertarget{sensor__nvs_8c_a8b0c454d609035825f8309a7feb15500}\label{sensor__nvs_8c_a8b0c454d609035825f8309a7feb15500} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!LOG\_MODULE\_REGISTER@{LOG\_MODULE\_REGISTER}}
\index{LOG\_MODULE\_REGISTER@{LOG\_MODULE\_REGISTER}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{LOG\_MODULE\_REGISTER()}{LOG\_MODULE\_REGISTER()}}
{\footnotesize\ttfamily LOG\+\_\+\+MODULE\+\_\+\+REGISTER (\begin{DoxyParamCaption}\item[{SENSOR\+\_\+\+NVS}]{,  }\item[{LOG\+\_\+\+LEVEL\+\_\+\+INF}]{ }\end{DoxyParamCaption})}

\Hypertarget{sensor__nvs_8c_a82eb1f53f08c01bc99029213a6203dc3}\label{sensor__nvs_8c_a82eb1f53f08c01bc99029213a6203dc3} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!sensor\_nvs\_clear@{sensor\_nvs\_clear}}
\index{sensor\_nvs\_clear@{sensor\_nvs\_clear}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{sensor\_nvs\_clear()}{sensor\_nvs\_clear()}}
{\footnotesize\ttfamily int sensor\+\_\+nvs\+\_\+clear (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Clear all data from NVS. NVS must be setup again after clearing. 

\begin{DoxyReturn}{Returns}
int 0 on success, -\/ERRNO errno code if error 
\end{DoxyReturn}
\Hypertarget{sensor__nvs_8c_af615860b9748846209f289beb45ce676}\label{sensor__nvs_8c_af615860b9748846209f289beb45ce676} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!sensor\_nvs\_delete@{sensor\_nvs\_delete}}
\index{sensor\_nvs\_delete@{sensor\_nvs\_delete}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{sensor\_nvs\_delete()}{sensor\_nvs\_delete()}}
{\footnotesize\ttfamily int sensor\+\_\+nvs\+\_\+delete (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{address }\end{DoxyParamCaption})}



Delete data from NVS with given address. 


\begin{DoxyParams}{Parameters}
{\em address} & address of NVS to delete \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 on error 
\end{DoxyReturn}
\Hypertarget{sensor__nvs_8c_ac068b185263f41a08f176a986e2e8ffb}\label{sensor__nvs_8c_ac068b185263f41a08f176a986e2e8ffb} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!sensor\_nvs\_read@{sensor\_nvs\_read}}
\index{sensor\_nvs\_read@{sensor\_nvs\_read}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{sensor\_nvs\_read()}{sensor\_nvs\_read()}}
{\footnotesize\ttfamily int sensor\+\_\+nvs\+\_\+read (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{address,  }\item[{void \texorpdfstring{$\ast$}{*}}]{data,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Read data from NVS with given address, data is written to the provided buffer. 


\begin{DoxyParams}{Parameters}
{\em address} & address of NVS to read from \\
\hline
{\em data} & pointer to data buffer to write \\
\hline
{\em length} & length of data to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 on error 
\end{DoxyReturn}
\Hypertarget{sensor__nvs_8c_acd3b35314828749fb2850c5b507be010}\label{sensor__nvs_8c_acd3b35314828749fb2850c5b507be010} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!sensor\_nvs\_setup@{sensor\_nvs\_setup}}
\index{sensor\_nvs\_setup@{sensor\_nvs\_setup}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{sensor\_nvs\_setup()}{sensor\_nvs\_setup()}}
{\footnotesize\ttfamily int sensor\+\_\+nvs\+\_\+setup (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{nvs\+\_\+address\+\_\+count }\end{DoxyParamCaption})}



Setup NVS for use. An enum list of addresses should be defined in application code, with the maximum number of addresses being defined. This must be called before any other NVS functions. This mounts the NVS partition and initializes it. The nvs\+\_\+address\+\_\+count will be used to know when the address is out of bounds. 


\begin{DoxyParams}{Parameters}
{\em nvs\+\_\+address\+\_\+count} & the number of addresses to use in the NVS partition \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 on error 
\end{DoxyReturn}
\Hypertarget{sensor__nvs_8c_a24adeba9780a84e3adba4e4cc4852a82}\label{sensor__nvs_8c_a24adeba9780a84e3adba4e4cc4852a82} 
\index{sensor\_nvs.c@{sensor\_nvs.c}!sensor\_nvs\_write@{sensor\_nvs\_write}}
\index{sensor\_nvs\_write@{sensor\_nvs\_write}!sensor\_nvs.c@{sensor\_nvs.c}}
\doxysubsubsection{\texorpdfstring{sensor\_nvs\_write()}{sensor\_nvs\_write()}}
{\footnotesize\ttfamily int sensor\+\_\+nvs\+\_\+write (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{address,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{data,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Write given data buffer to NVS with given address. 


\begin{DoxyParams}{Parameters}
{\em address} & address of NVS to write to \\
\hline
{\em data} & pointer to data buffer to write \\
\hline
{\em length} & length of data to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 0 on success, -\/1 on error 
\end{DoxyReturn}
