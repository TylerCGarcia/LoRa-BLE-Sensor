<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRa-BLE-Sensor: app/src/sensor_timer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LoRa-BLE-Sensor<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="dir_a8f641299cfea9f7461c2df1141b7786.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sensor_timer.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="sensor__timer_8h_source.html">sensor_timer.h</a>&gt;</code><br />
<code>#include &lt;zephyr/kernel.h&gt;</code><br />
<code>#include &lt;zephyr/logging/log.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sensor_timer.c:</div>
<div class="dyncontent">
<div class="center"><img src="sensor__timer_8c__incl.png" border="0" usemap="#aapp_2src_2sensor__timer_8c" alt=""/></div>
<map name="aapp_2src_2sensor__timer_8c" id="aapp_2src_2sensor__timer_8c">
<area shape="rect" title=" " alt="" coords="244,5,412,31"/>
<area shape="rect" href="sensor__timer_8h.html" title="This is a library to keep track of sensor and radio timers. Manages alarms for sensors and radio tran..." alt="" coords="123,79,242,104"/>
<area shape="poly" title=" " alt="" coords="306,33,220,75,217,70,303,28"/>
<area shape="rect" title=" " alt="" coords="267,79,389,104"/>
<area shape="poly" title=" " alt="" coords="331,31,331,65,325,65,325,31"/>
<area shape="rect" title=" " alt="" coords="413,79,568,104"/>
<area shape="poly" title=" " alt="" coords="355,28,453,71,450,75,353,33"/>
<area shape="rect" title=" " alt="" coords="5,152,184,177"/>
<area shape="poly" title=" " alt="" coords="170,106,121,145,118,141,167,102"/>
<area shape="rect" title=" " alt="" coords="208,152,333,177"/>
<area shape="poly" title=" " alt="" coords="198,102,247,141,244,145,195,106"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aef3492a560014ecfdc7c4c706f26e085" id="r_aef3492a560014ecfdc7c4c706f26e085"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#aef3492a560014ecfdc7c4c706f26e085">LOG_MODULE_REGISTER</a> (SENSOR_TIMER, LOG_LEVEL_INF)</td></tr>
<tr class="separator:aef3492a560014ecfdc7c4c706f26e085"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec38ee834d2968ed0c8a1a0154625e05" id="r_aec38ee834d2968ed0c8a1a0154625e05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#aec38ee834d2968ed0c8a1a0154625e05">sensor_timer_init</a> (const struct device *dev)</td></tr>
<tr class="memdesc:aec38ee834d2968ed0c8a1a0154625e05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the chosen sensor timer instance and create a top value callback to increment the total overflown seconds. This also starts the timer.  <br /></td></tr>
<tr class="separator:aec38ee834d2968ed0c8a1a0154625e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a7d60320e2e64cd3f713e2c3834f68" id="r_a74a7d60320e2e64cd3f713e2c3834f68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#a74a7d60320e2e64cd3f713e2c3834f68">sensor_timer_start</a> (const struct device *dev)</td></tr>
<tr class="memdesc:a74a7d60320e2e64cd3f713e2c3834f68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the chosen sensor timer instance.  <br /></td></tr>
<tr class="separator:a74a7d60320e2e64cd3f713e2c3834f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc741003bd636994c8405570743c5468" id="r_afc741003bd636994c8405570743c5468"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#afc741003bd636994c8405570743c5468">sensor_timer_get_current_seconds</a> (const struct device *dev)</td></tr>
<tr class="memdesc:afc741003bd636994c8405570743c5468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current seconds the timer was started. This value resets every time the timer is reset or top value is reached.  <br /></td></tr>
<tr class="separator:afc741003bd636994c8405570743c5468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6119e6df207fcc634fd79e676ee406" id="r_a4a6119e6df207fcc634fd79e676ee406"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#a4a6119e6df207fcc634fd79e676ee406">sensor_timer_get_total_seconds</a> (const struct device *dev)</td></tr>
<tr class="memdesc:a4a6119e6df207fcc634fd79e676ee406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the total seconds the timer has been running. This value is reset when the timer is reset.  <br /></td></tr>
<tr class="separator:a4a6119e6df207fcc634fd79e676ee406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca813e54e76ffea463291f87a72efcb5" id="r_aca813e54e76ffea463291f87a72efcb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#aca813e54e76ffea463291f87a72efcb5">sensor_timer_reset</a> (const struct device *dev)</td></tr>
<tr class="memdesc:aca813e54e76ffea463291f87a72efcb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the chosen sensor timer instance. This also resets the total seconds to 0.  <br /></td></tr>
<tr class="separator:aca813e54e76ffea463291f87a72efcb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae630f67377c76b3e029f5a75c5101e72" id="r_ae630f67377c76b3e029f5a75c5101e72"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#ae630f67377c76b3e029f5a75c5101e72">sensor_timer_stop</a> (const struct device *dev)</td></tr>
<tr class="memdesc:ae630f67377c76b3e029f5a75c5101e72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the chosen sensor timer instance. Timer will remain at the current value.  <br /></td></tr>
<tr class="separator:ae630f67377c76b3e029f5a75c5101e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af921bc6e3c92f4ab106e2977b7155646" id="r_af921bc6e3c92f4ab106e2977b7155646"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#af921bc6e3c92f4ab106e2977b7155646">sensor_timer_set_alarm</a> (const struct device *dev, <a class="el" href="structsensor__timer__alarm__cfg__t.html">sensor_timer_alarm_cfg_t</a> *sensor_timer_alarm_cfg)</td></tr>
<tr class="memdesc:af921bc6e3c92f4ab106e2977b7155646"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the alarm for the chosen sensor timer instance, also setting the top value of the timer to the chosen alarm value. When the alarm is triggered, the callback function will be called and the timer will be reset. In alarm callback, the is_alarm_set needs to be set to 0 manually.  <br /></td></tr>
<tr class="separator:af921bc6e3c92f4ab106e2977b7155646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e461a7a10a1f5dd4d8e6e62c775d38" id="r_a59e461a7a10a1f5dd4d8e6e62c775d38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__timer_8c.html#a59e461a7a10a1f5dd4d8e6e62c775d38">sensor_timer_cancel_alarm</a> (const struct device *dev, uint8_t channel)</td></tr>
<tr class="memdesc:a59e461a7a10a1f5dd4d8e6e62c775d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel the alarm for the chosen channel of the sensor timer instance.  <br /></td></tr>
<tr class="separator:a59e461a7a10a1f5dd4d8e6e62c775d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aef3492a560014ecfdc7c4c706f26e085" name="aef3492a560014ecfdc7c4c706f26e085"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef3492a560014ecfdc7c4c706f26e085">&#9670;&#160;</a></span>LOG_MODULE_REGISTER()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOG_MODULE_REGISTER </td>
          <td>(</td>
          <td class="paramtype">SENSOR_TIMER&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LOG_LEVEL_INF&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a59e461a7a10a1f5dd4d8e6e62c775d38" name="a59e461a7a10a1f5dd4d8e6e62c775d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e461a7a10a1f5dd4d8e6e62c775d38">&#9670;&#160;</a></span>sensor_timer_cancel_alarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_cancel_alarm </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cancel the alarm for the chosen channel of the sensor timer instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to cancel the alarm for. </td></tr>
    <tr><td class="paramname">channel</td><td>The channel to cancel the alarm for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
<a id="afc741003bd636994c8405570743c5468" name="afc741003bd636994c8405570743c5468"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc741003bd636994c8405570743c5468">&#9670;&#160;</a></span>sensor_timer_get_current_seconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_get_current_seconds </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current seconds the timer was started. This value resets every time the timer is reset or top value is reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to get the seconds from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The seconds elapsed since the timer was started, or negative error code on failure. </dd></dl>

</div>
</div>
<a id="a4a6119e6df207fcc634fd79e676ee406" name="a4a6119e6df207fcc634fd79e676ee406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a6119e6df207fcc634fd79e676ee406">&#9670;&#160;</a></span>sensor_timer_get_total_seconds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_get_total_seconds </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the total seconds the timer has been running. This value is reset when the timer is reset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to get the total seconds from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total seconds the timer has been running, or negative error code on failure. </dd></dl>

</div>
</div>
<a id="aec38ee834d2968ed0c8a1a0154625e05" name="aec38ee834d2968ed0c8a1a0154625e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec38ee834d2968ed0c8a1a0154625e05">&#9670;&#160;</a></span>sensor_timer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_init </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the chosen sensor timer instance and create a top value callback to increment the total overflown seconds. This also starts the timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to initialize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
<a id="aca813e54e76ffea463291f87a72efcb5" name="aca813e54e76ffea463291f87a72efcb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca813e54e76ffea463291f87a72efcb5">&#9670;&#160;</a></span>sensor_timer_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_reset </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the chosen sensor timer instance. This also resets the total seconds to 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to reset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
<a id="af921bc6e3c92f4ab106e2977b7155646" name="af921bc6e3c92f4ab106e2977b7155646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af921bc6e3c92f4ab106e2977b7155646">&#9670;&#160;</a></span>sensor_timer_set_alarm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_set_alarm </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structsensor__timer__alarm__cfg__t.html">sensor_timer_alarm_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_timer_alarm_cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the alarm for the chosen sensor timer instance, also setting the top value of the timer to the chosen alarm value. When the alarm is triggered, the callback function will be called and the timer will be reset. In alarm callback, the is_alarm_set needs to be set to 0 manually. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to set the alarm for. </td></tr>
    <tr><td class="paramname">sensor_timer_alarm_cfg</td><td>The alarm configuration to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
<a id="a74a7d60320e2e64cd3f713e2c3834f68" name="a74a7d60320e2e64cd3f713e2c3834f68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a7d60320e2e64cd3f713e2c3834f68">&#9670;&#160;</a></span>sensor_timer_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_start </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the chosen sensor timer instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to start. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
<a id="ae630f67377c76b3e029f5a75c5101e72" name="ae630f67377c76b3e029f5a75c5101e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae630f67377c76b3e029f5a75c5101e72">&#9670;&#160;</a></span>sensor_timer_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_timer_stop </td>
          <td>(</td>
          <td class="paramtype">const struct device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the chosen sensor timer instance. Timer will remain at the current value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>The timer device to stop. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, negative error code on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
