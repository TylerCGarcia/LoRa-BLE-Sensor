<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRa-BLE-Sensor: app/include/sensor_data.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LoRa-BLE-Sensor<span id="projectnumber">&#160;0.4.1-5-gfba7e49</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="dir_78f5ecd95a37a67589a284a718a0be9c.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sensor_data.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is a library to keep track of sensor data, using the sensor_reading library to collect data from the sensors. This library will also handle the data storage and retrieval.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="sensor__id_8h_source.html">sensor_id.h</a>&quot;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;zephyr/sys/ring_buffer.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for sensor_data.h:</div>
<div class="dyncontent">
<div class="center"><img src="sensor__data_8h__incl.png" border="0" usemap="#aapp_2include_2sensor__data_8h" alt=""/></div>
<map name="aapp_2include_2sensor__data_8h" id="aapp_2include_2sensor__data_8h">
<area shape="rect" title="This is a library to keep track of sensor data, using the sensor_reading library to collect data from..." alt="" coords="139,5,283,45"/>
<area shape="rect" href="sensor__id_8h.html" title="This is a library to keep track of sensor ids and sensor power ids. As well as the configuration for ..." alt="" coords="5,93,101,119"/>
<area shape="poly" title=" " alt="" coords="174,48,90,89,88,85,172,43"/>
<area shape="rect" title=" " alt="" coords="125,93,200,119"/>
<area shape="poly" title=" " alt="" coords="201,47,179,83,175,80,197,44"/>
<area shape="rect" title=" " alt="" coords="225,93,295,119"/>
<area shape="poly" title=" " alt="" coords="225,44,248,80,243,83,220,47"/>
<area shape="rect" title=" " alt="" coords="319,93,497,119"/>
<area shape="poly" title=" " alt="" coords="259,43,367,86,365,91,257,48"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="sensor__data_8h__dep__incl.png" border="0" usemap="#aapp_2include_2sensor__data_8hdep" alt=""/></div>
<map name="aapp_2include_2sensor__data_8hdep" id="aapp_2include_2sensor__data_8hdep">
<area shape="rect" title="This is a library to keep track of sensor data, using the sensor_reading library to collect data from..." alt="" coords="105,5,249,45"/>
<area shape="rect" href="sensor__app_8c.html" title="A library to manage sensor applications. Working between power configurations, data configurations,..." alt="" coords="5,93,164,119"/>
<area shape="poly" title=" " alt="" coords="146,56,100,95,97,91,142,52"/>
<area shape="rect" href="sensor__data_8c.html" title="This is a library to keep track of sensor data, using the sensor_reading library to collect data from..." alt="" coords="189,93,351,119"/>
<area shape="poly" title=" " alt="" coords="211,52,258,91,254,95,208,56"/>
</map>
</div>
</div>
<p><a href="sensor__data_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsensor__data__t.html">sensor_data_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for the sensor data. This is used to store the sensor data and timestamp for each sensor.  <a href="structsensor__data__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3c1dd237f2fda312ac8da3475b809f73" id="r_a3c1dd237f2fda312ac8da3475b809f73"><td class="memItemLeft" align="right" valign="top"><a id="a3c1dd237f2fda312ac8da3475b809f73" name="a3c1dd237f2fda312ac8da3475b809f73"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DATA_BUFFER_SIZE</b>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a3c1dd237f2fda312ac8da3475b809f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ae58811ccec39232f9c49d149eed4a324" id="r_ae58811ccec39232f9c49d149eed4a324"><td class="memItemLeft" align="right" valign="top"><a id="ae58811ccec39232f9c49d149eed4a324" name="ae58811ccec39232f9c49d149eed4a324"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#ae58811ccec39232f9c49d149eed4a324">sensor_data_type</a> { <br />
&#160;&#160;<b>DATA_TYPE_INT</b>
, <b>DATA_TYPE_UINT8</b>
, <b>DATA_TYPE_UINT16</b>
, <b>DATA_TYPE_UINT32</b>
, <br />
&#160;&#160;<b>DATA_TYPE_FLOAT</b>
, <b>DATA_TYPE_LIMIT</b>
<br />
 }</td></tr>
<tr class="memdesc:ae58811ccec39232f9c49d149eed4a324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of data that can be stored in the sensor data buffer. Currently unused, plans to keep it for future use to potentially store in <a class="el" href="structsensor__data__t.html" title="Structure for the sensor data. This is used to store the sensor data and timestamp for each sensor.">sensor_data_t</a> struct. <br /></td></tr>
<tr class="separator:ae58811ccec39232f9c49d149eed4a324"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1e50ff31480edbdf0db27eb081e46f02" id="r_a1e50ff31480edbdf0db27eb081e46f02"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#a1e50ff31480edbdf0db27eb081e46f02">sensor_data_setup</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *sensor_data, enum <a class="el" href="sensor__id_8h.html#ad7b3bc5128f463a9f210147ad5c043be">sensor_types</a> type, enum <a class="el" href="sensor__id_8h.html#adef9477a37671049d57edb26e6a37746">sensor_voltage</a> voltage_enum)</td></tr>
<tr class="memdesc:a1e50ff31480edbdf0db27eb081e46f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the sensor data. If the sensor chosen has continuous power, the power will be turned on when the sensor is setup. If not the power will be turned on only when the data is read. PULSE_SENSORs use continuous power. To disable a sensor, set the type to NULL_SENSOR. This is important when using a sensor with continuous power, as it will turn off the power when the sensor is deinitialized.  <br /></td></tr>
<tr class="separator:a1e50ff31480edbdf0db27eb081e46f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd2198b628694d06c7e9e60c542e3d5" id="r_aebd2198b628694d06c7e9e60c542e3d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#aebd2198b628694d06c7e9e60c542e3d5">sensor_data_read</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *sensor_data, int timestamp)</td></tr>
<tr class="memdesc:aebd2198b628694d06c7e9e60c542e3d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the sensor data, and store the data in the buffer. It adds a tinestamp to the data buffer.  <br /></td></tr>
<tr class="separator:aebd2198b628694d06c7e9e60c542e3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab28c5d63a9b2e900f09ed9da824bb46" id="r_aab28c5d63a9b2e900f09ed9da824bb46"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#aab28c5d63a9b2e900f09ed9da824bb46">sensor_data_print_data</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *sensor_data)</td></tr>
<tr class="memdesc:aab28c5d63a9b2e900f09ed9da824bb46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print the sensor data from data and timestamp ring buffers. Displaying it from the oldest to newest.  <br /></td></tr>
<tr class="separator:aab28c5d63a9b2e900f09ed9da824bb46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f27b36b46521995937d03a4dc7e789" id="r_a06f27b36b46521995937d03a4dc7e789"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#a06f27b36b46521995937d03a4dc7e789">sensor_data_clear</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *sensor_data)</td></tr>
<tr class="memdesc:a06f27b36b46521995937d03a4dc7e789"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the sensor data.  <br /></td></tr>
<tr class="separator:a06f27b36b46521995937d03a4dc7e789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b88e902bae5b2bd14945e9ef87c0579" id="r_a7b88e902bae5b2bd14945e9ef87c0579"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sensor__data_8h.html#a7b88e902bae5b2bd14945e9ef87c0579">sensor_data_format_for_lorawan</a> (<a class="el" href="structsensor__data__t.html">sensor_data_t</a> *sensor_data, uint8_t *data, uint8_t *data_len)</td></tr>
<tr class="memdesc:a7b88e902bae5b2bd14945e9ef87c0579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format the sensor data for LoRaWAN, this breaks the data into a uint8_t array.  <br /></td></tr>
<tr class="separator:a7b88e902bae5b2bd14945e9ef87c0579"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a library to keep track of sensor data, using the sensor_reading library to collect data from the sensors. This library will also handle the data storage and retrieval. </p>
<dl class="section author"><dt>Author</dt><dd>Tyler Garcia </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-05-14</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a06f27b36b46521995937d03a4dc7e789" name="a06f27b36b46521995937d03a4dc7e789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06f27b36b46521995937d03a4dc7e789">&#9670;&#160;</a></span>sensor_data_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_data_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the sensor data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_data</td><td>The sensor data to clear. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7b88e902bae5b2bd14945e9ef87c0579" name="a7b88e902bae5b2bd14945e9ef87c0579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b88e902bae5b2bd14945e9ef87c0579">&#9670;&#160;</a></span>sensor_data_format_for_lorawan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_data_format_for_lorawan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Format the sensor data for LoRaWAN, this breaks the data into a uint8_t array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_data</td><td>The sensor data to format. </td></tr>
    <tr><td class="paramname">data</td><td>The data to format. </td></tr>
    <tr><td class="paramname">data_len</td><td>The length of the data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful, -1 if failed. </dd></dl>

</div>
</div>
<a id="aab28c5d63a9b2e900f09ed9da824bb46" name="aab28c5d63a9b2e900f09ed9da824bb46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab28c5d63a9b2e900f09ed9da824bb46">&#9670;&#160;</a></span>sensor_data_print_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_data_print_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print the sensor data from data and timestamp ring buffers. Displaying it from the oldest to newest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_data</td><td>The sensor data to print. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aebd2198b628694d06c7e9e60c542e3d5" name="aebd2198b628694d06c7e9e60c542e3d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebd2198b628694d06c7e9e60c542e3d5">&#9670;&#160;</a></span>sensor_data_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_data_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the sensor data, and store the data in the buffer. It adds a tinestamp to the data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_data</td><td>The sensor data to read. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The timestamp to add to the data buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful, -1 if failed. </dd></dl>

</div>
</div>
<a id="a1e50ff31480edbdf0db27eb081e46f02" name="a1e50ff31480edbdf0db27eb081e46f02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e50ff31480edbdf0db27eb081e46f02">&#9670;&#160;</a></span>sensor_data_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sensor_data_setup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__data__t.html">sensor_data_t</a> *&#160;</td>
          <td class="paramname"><em>sensor_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="sensor__id_8h.html#ad7b3bc5128f463a9f210147ad5c043be">sensor_types</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="sensor__id_8h.html#adef9477a37671049d57edb26e6a37746">sensor_voltage</a>&#160;</td>
          <td class="paramname"><em>voltage_enum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup the sensor data. If the sensor chosen has continuous power, the power will be turned on when the sensor is setup. If not the power will be turned on only when the data is read. PULSE_SENSORs use continuous power. To disable a sensor, set the type to NULL_SENSOR. This is important when using a sensor with continuous power, as it will turn off the power when the sensor is deinitialized. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_data</td><td>The sensor data to setup holding the sensor id and power id. </td></tr>
    <tr><td class="paramname">type</td><td>The type of sensor to setup. </td></tr>
    <tr><td class="paramname">voltage_enum</td><td>The voltage to use for the sensor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful, -1 if failed. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
