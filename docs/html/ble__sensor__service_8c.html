<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRa-BLE-Sensor: app/src/ble_sensor_service.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LoRa-BLE-Sensor<span id="projectnumber">&#160;0.4.1-5-gfba7e49</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="dir_a8f641299cfea9f7461c2df1141b7786.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ble_sensor_service.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is a library to handle the BLE services for the sensor. It allows for configurations of the sensor, including power configuration, sensor configuration, and data frequency. It also allows for the retrieval of the sensor data.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ble__sensor__service_8h_source.html">ble_sensor_service.h</a>&quot;</code><br />
<code>#include &lt;zephyr/bluetooth/bluetooth.h&gt;</code><br />
<code>#include &lt;zephyr/bluetooth/gatt.h&gt;</code><br />
<code>#include &lt;zephyr/logging/log.h&gt;</code><br />
<code>#include &quot;<a class="el" href="sensor__nvs_8h_source.html">sensor_nvs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sensor__names_8h_source.html">sensor_names.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ble_sensor_service.c:</div>
<div class="dyncontent">
<div class="center"><img src="ble__sensor__service_8c__incl.png" border="0" usemap="#aapp_2src_2ble__sensor__service_8c" alt=""/></div>
<map name="aapp_2src_2ble__sensor__service_8c" id="aapp_2src_2ble__sensor__service_8c">
<area shape="rect" title="This is a library to handle the BLE services for the sensor. It allows for configurations of the sens..." alt="" coords="382,5,525,45"/>
<area shape="rect" href="ble__sensor__service_8h.html" title="This is a library to handle the BLE services for the sensor. It allows for configurations of the sens..." alt="" coords="126,93,285,119"/>
<area shape="poly" title=" " alt="" coords="395,48,255,92,254,87,393,43"/>
<area shape="rect" title=" " alt="" coords="440,93,651,119"/>
<area shape="poly" title=" " alt="" coords="477,44,523,82,519,86,474,48"/>
<area shape="rect" title=" " alt="" coords="675,93,850,119"/>
<area shape="poly" title=" " alt="" coords="525,42,705,87,704,93,524,47"/>
<area shape="rect" title=" " alt="" coords="875,93,1029,119"/>
<area shape="poly" title=" " alt="" coords="525,35,867,89,866,94,524,40"/>
<area shape="rect" href="sensor__nvs_8h.html" title="This is a library to keep track of sensor information and configurations that are stored in the non&#45;v..." alt="" coords="309,93,416,119"/>
<area shape="poly" title=" " alt="" coords="433,48,388,86,385,82,430,44"/>
<area shape="rect" href="sensor__names_8h.html" title="This is a library for sensor names, converting between strings and enum values to make configurations..." alt="" coords="5,167,133,192"/>
<area shape="poly" title=" " alt="" coords="382,36,231,58,161,75,134,85,115,95,102,108,92,123,78,155,73,152,87,120,98,104,112,91,132,80,160,70,230,53,381,31"/>
<area shape="rect" href="sensor__app_8h.html" title="A library to manage sensor applications. Working between power configurations, data configurations,..." alt="" coords="158,167,266,192"/>
<area shape="poly" title=" " alt="" coords="209,119,212,153,207,153,204,119"/>
<area shape="rect" href="sensor__id_8h.html" title="This is a library to keep track of sensor ids and sensor power ids. As well as the configuration for ..." alt="" coords="84,240,180,265"/>
<area shape="poly" title=" " alt="" coords="201,194,157,233,153,229,197,190"/>
<area shape="rect" title=" " alt="" coords="222,240,293,265"/>
<area shape="poly" title=" " alt="" coords="222,191,245,227,240,230,217,194"/>
<area shape="poly" title=" " alt="" coords="356,121,276,230,272,227,352,118"/>
<area shape="rect" title=" " alt="" coords="341,167,416,192"/>
<area shape="poly" title=" " alt="" coords="368,118,376,153,371,154,363,120"/>
<area shape="poly" title=" " alt="" coords="82,191,115,228,111,231,78,194"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2d285f9a5fb7859723c18937fa6600ca" id="r_a2d285f9a5fb7859723c18937fa6600ca"><td class="memItemLeft" align="right" valign="top"><a id="a2d285f9a5fb7859723c18937fa6600ca" name="a2d285f9a5fb7859723c18937fa6600ca"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LOG_MODULE_REGISTER</b> (BLE_SENSOR_SERVICE, LOG_LEVEL_DBG)</td></tr>
<tr class="separator:a2d285f9a5fb7859723c18937fa6600ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4c6144894fbd2407f413f1c077737a" id="r_a0c4c6144894fbd2407f413f1c077737a"><td class="memItemLeft" align="right" valign="top"><a id="a0c4c6144894fbd2407f413f1c077737a" name="a0c4c6144894fbd2407f413f1c077737a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>BT_GATT_SERVICE_DEFINE</b> (sensor_svc, BT_GATT_PRIMARY_SERVICE(BT_UUID_SENSOR), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR_STATE, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor_state, write_sensor_state, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_ENABLED, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor1_enabled, write_sensor1_enabled, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_CONFIG, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor1_config, write_sensor1_config, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_PWR_CONFIG, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor1_pwr_config, write_sensor1_pwr_config, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_DATA_FREQ, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor1_data_freq, write_sensor1_data_freq, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_DATA, BT_GATT_CHRC_READ, BT_GATT_PERM_READ, read_sensor1_data, NULL, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR1_DATA_TIMESTAMP, BT_GATT_CHRC_READ, BT_GATT_PERM_READ, read_sensor1_data_time, NULL, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_ENABLED, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor2_enabled, write_sensor2_enabled, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_CONFIG, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor2_config, write_sensor2_config, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_PWR_CONFIG, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor2_pwr_config, write_sensor2_pwr_config, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_DATA_FREQ, BT_GATT_CHRC_READ|BT_GATT_CHRC_WRITE, BT_GATT_PERM_READ|BT_GATT_PERM_WRITE, read_sensor2_data_freq, write_sensor2_data_freq, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_DATA, BT_GATT_CHRC_READ, BT_GATT_PERM_READ, read_sensor2_data, NULL, NULL), BT_GATT_CHARACTERISTIC(BT_UUID_SENSOR2_DATA_TIMESTAMP, BT_GATT_CHRC_READ, BT_GATT_PERM_READ, read_sensor2_data_time, NULL, NULL),)</td></tr>
<tr class="separator:a0c4c6144894fbd2407f413f1c077737a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba80859b2f82bf34b2ea8655204e056" id="r_a1ba80859b2f82bf34b2ea8655204e056"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ble__sensor__service_8c.html#a1ba80859b2f82bf34b2ea8655204e056">ble_sensor_service_init</a> (<a class="el" href="structsensor__app__config__t.html">sensor_app_config_t</a> *config)</td></tr>
<tr class="memdesc:a1ba80859b2f82bf34b2ea8655204e056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the BLE sensor service.  <br /></td></tr>
<tr class="separator:a1ba80859b2f82bf34b2ea8655204e056"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a library to handle the BLE services for the sensor. It allows for configurations of the sensor, including power configuration, sensor configuration, and data frequency. It also allows for the retrieval of the sensor data. </p>
<dl class="section author"><dt>Author</dt><dd>Tyler Garcia </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-05-06</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2025 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1ba80859b2f82bf34b2ea8655204e056" name="a1ba80859b2f82bf34b2ea8655204e056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ba80859b2f82bf34b2ea8655204e056">&#9670;&#160;</a></span>ble_sensor_service_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ble_sensor_service_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensor__app__config__t.html">sensor_app_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the BLE sensor service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>Pointer to the sensor app config </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful, &lt; 0 if unsuccessful </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
